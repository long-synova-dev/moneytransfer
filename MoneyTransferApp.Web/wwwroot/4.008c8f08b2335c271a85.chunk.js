webpackJsonp([4],{Kl9A:function(t,n){t.exports=".price-card {\r\n    position: relative;\r\n    padding-top: 30px;\r\n    /* padding-bottom: 30px; */\r\n    margin-top: 30px;\r\n    -webkit-transition: -webkit-transform .3s ease-out;\r\n    transition: -webkit-transform .3s ease-out;\r\n    transition: transform .3s ease-out;\r\n    transition: transform .3s ease-out, -webkit-transform .3s ease-out;\r\n    border: 2px solid transparent;\r\n}\r\n.price-card.active,\r\n.price-card:hover {\r\n    border: 2px solid #8bb63b;\r\n}\r\n.price-card__overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n}\r\n/* .active .price-card__overlay, */\r\n.open .price-card__overlay {\r\n    display: none;\r\n}\r\n.price-card__label {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 50%;\r\n    width: 225px;\r\n    padding: 5px 20px;\r\n    background: #8bb63b;\r\n    border-bottom-left-radius: 5px;\r\n    border-bottom-right-radius: 5px;\r\n    color: #fff;\r\n    text-align: center;\r\n    -webkit-transform: translateX(-50%);\r\n            transform: translateX(-50%);\r\n}\r\n.price-card:hover {\r\n    -webkit-transform: translateY(-10px);\r\n            transform: translateY(-10px);\r\n}\r\n.price-card--active .price {\r\n    color: #8bb63b;\r\n}\r\n.price {\r\n    text-align: center;\r\n}\r\n.price .price__unit {\r\n    font-size: 24px;\r\n}\r\n.price .price__number {\r\n    font-size: 48px;\r\n}\r\n.price-card__ribbon {\r\n    position: absolute;\r\n    overflow: hidden;\r\n    top: 0;\r\n    left: 0;\r\n    width: 114px;\r\n    height: 112px;\r\n}\r\n.price-card__ribbon span {\r\n    position: absolute;\r\n    display: block;\r\n    width: 160px;\r\n    padding: 10px 0;\r\n    background-color: #8bb63b;\r\n    color: #fff;\r\n    font-size: 12px;\r\n    text-transform: uppercase;\r\n    text-align: center;\r\n    left: -35px;\r\n    top: 25px;\r\n    -webkit-transform: rotate(-45deg);\r\n            transform: rotate(-45deg);\r\n}\r\n/* .price-card-active {\r\n    background-color: #fffff1;\r\n} */\r\n.custom-switch {\r\n    width: 50px;\r\n    padding: 2px;\r\n    border:2px solid #d4d4d4;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    -webkit-transition: all 0.3s;\r\n    transition: all 0.3s;\r\n    border-radius: 80px;\r\n    cursor: pointer;\r\n}\r\n.custom-switch input {\r\n    visibility: hidden;\r\n    display: none;\r\n}\r\n.custom-switch__button {\r\n    display: block;\r\n    width:20px;\r\n    height:20px;\r\n    background:#8bb63b;\r\n    border-radius: 30px;\r\n    position:relative;\r\n    transition:all 0.3s;\r\n    left:0;\r\n    -webkit-transition:all 0.3s;\r\n}\r\ninput:checked + .custom-switch__button{\r\n    left:22px;\r\n}\r\n.subscription-type {\r\n    width: 100%;\r\n    margin: 10px 0;\r\n    text-align: center;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n}\r\n.add-ons-block {\r\n    height: 0;\r\n    overflow: hidden;\r\n    -webkit-transition: height .3s ease-out;\r\n    transition: height .3s ease-out;\r\n    -webkit-transition-delay: .3s;\r\n            transition-delay: .3s;\r\n}\r\n.addons {\r\n    margin-top: 10px;\r\n    margin-bottom: 20px;\r\n}\r\n.has-coupon .addons:last-of-type {\r\n    margin-bottom: 10px;\r\n}\r\n.feature-list {\r\n    padding-left: 10px;\r\n}\r\n/* .price-card.active .add-ons-block, */\r\n.price-card.open .add-ons-block {\r\n    height: 370px;\r\n    -webkit-transition-delay: unset;\r\n            transition-delay: unset;\r\n}\r\n.has-coupon.price-card.open .add-ons-block {\r\n    height: 410px;\r\n    -webkit-transition-delay: unset;\r\n            transition-delay: unset;\r\n}\r\n.price-card.disable {\r\n    cursor: not-allowed;\r\n}\r\n.price-card.open.disable .add-ons-block {\r\n    height: 0;\r\n}\r\n.current-plan-info tr td:first-child {\r\n    padding-right: 10px;\r\n}\r\n.cancel-alert {\r\n    margin-top: 20px;\r\n    background: #fff;\r\n    padding: 10px;\r\n    visibility: hidden;\r\n}\r\n.cancel-alert.active {\r\n    visibility: visible;\r\n}\r\n.cancel-alert__title {\r\n    color: #951425;\r\n}\r\n.cancel-alert__title .material-icons {\r\n    font-size: 16px;\r\n    vertical-align: middle;\r\n}"},NMEK:function(t,n){t.exports=".pmd-chip-no-icon {\r\n    font-size: 12px;\r\n    color: white;\r\n    padding-right: 13px;\r\n    height: 20px;\r\n    line-height: 20px;\r\n}\r\n\r\n.cancelled, .inactive {\r\n    background-color: #bac3ca;    \r\n}\r\n\r\n.pending {\r\n    background-color: #f2cb2a;   \r\n}\r\n\r\n.settled, .active {\r\n    background-color: #8cb63c;      \r\n}\r\n\r\n.plan-price {\r\ncolor: #8cb63c;\r\nfont-weight: bold;\r\n}\r\n\r\n.ngx-datatable.material {\r\n-webkit-box-shadow: 0 0 0 0;\r\n        box-shadow: 0 0 0 0;\r\n}\r\n\r\n.cancel-alert__title {\r\n    color: #951425;\r\n}\r\n\r\n.cancel-alert__title .material-icons {\r\n    font-size: 16px;\r\n    vertical-align: middle;\r\n}"},TdeZ:function(t,n){t.exports='<modal-dialog [(modalDialog)]="confirmDialog" *ngIf="selectedPlan">\r\n    <p>{{\'Subscription.Summary\' | translate}}</p>\r\n    <table class="table pmd-table table-sm">\r\n        <thead>\r\n            <tr>\r\n                <th>{{\'Subscription.Description\' | translate}}</th>\r\n                <th><div class="text-right">{{\'Subscription.MonthlyPrice\' | translate}}</div></th>\r\n                <th><div class="text-right">{{\'Subscription.Vat\' | translate}}</div></th>\r\n                <th><div class="text-right">{{\'Subscription.TotalNoVat\' | translate}}</div></th>\r\n                <th><div class="text-right">{{\'Subscription.TotalVat\' | translate}}</div></th>\r\n                <th><div class="text-right">{{\'Subscription.TotalIncVat\' | translate}}</div></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr>\r\n                <td>{{selectedPlan?.planName}}</td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{selectedPlan?.amount/100 | number: \'1.0-0\'| replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.vat | percent}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedPlan.amountInclVat ? selectedPlan?.amount / (1+selectedPlan?.vat)/100 : selectedPlan?.amount/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedPlan.amountInclVat ? selectedPlan?.amount * (selectedPlan?.vat / (1+selectedPlan?.vat)) / 100  : selectedPlan?.amount * selectedPlan?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedPlan.amountInclVat ? selectedPlan?.amount/100 : selectedPlan?.amount/100 + selectedPlan?.amount * selectedPlan?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n            </tr>\r\n            <tr *ngIf="selectedUserAddOns">\r\n                <td>{{selectedUserAddOns?.addOnName}}</td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{selectedUserAddOns?.amount/100 | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedUserAddOns?.vat | percent}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedUserAddOns.amountInclVat ? selectedUserAddOns?.amount / (1+selectedUserAddOns?.vat)/100 : selectedUserAddOns?.amount/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedUserAddOns.amountInclVat ? selectedUserAddOns?.amount * (selectedUserAddOns?.vat / (1+selectedUserAddOns?.vat)) / 100  : selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedUserAddOns.amountInclVat ? selectedUserAddOns?.amount/100 : selectedUserAddOns?.amount/100 + selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n            </tr>\r\n            <tr *ngIf="selectedSedaAddOns">\r\n                <td>{{selectedSedaAddOns?.addOnName}}</td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{selectedSedaAddOns?.amount/100 | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedSedaAddOns?.vat | percent}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedSedaAddOns.amountInclVat ? selectedSedaAddOns?.amount / (1+selectedSedaAddOns?.vat)/100 : selectedSedaAddOns?.amount/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedSedaAddOns.amountInclVat ? selectedSedaAddOns?.amount * (selectedSedaAddOns?.vat / (1+selectedSedaAddOns?.vat)) / 100  : selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n                <td>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{(selectedSedaAddOns.amountInclVat ? selectedSedaAddOns?.amount/100 : selectedSedaAddOns?.amount/100 + selectedSedaAddOns?.amount * selectedUserAddOns?.vat/100) | number: \'1.0-0\' | replace}}</span>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n        <tfoot>\r\n            <tr>\r\n                <th colspan="5">\r\n                    <span class="pull-right">Total (excl. VAT)</span>\r\n                </th>\r\n                <th>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{\r\n                        ((selectedPlan.amountInclVat ? selectedPlan?.amount / (1+selectedPlan?.vat)/100 : selectedPlan?.amount/100) + \r\n                        (selectedUserAddOns ? (selectedUserAddOns.amountInclVat ? selectedUserAddOns?.amount / (1+selectedUserAddOns?.vat)/100 : selectedUserAddOns?.amount/100) : 0) +\r\n                        (selectedSedaAddOns ? (selectedSedaAddOns.amountInclVat ? selectedSedaAddOns?.amount / (1+selectedSedaAddOns?.vat)/100 : selectedSedaAddOns?.amount/100) : 0))\r\n                        | number: \'1.0-0\' | replace}}</span>\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th colspan="5">\r\n                    <span class="pull-right">Total VAT</span>\r\n                </th>\r\n                <th>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{\r\n                        ((selectedPlan.amountInclVat ? selectedPlan?.amount * (selectedPlan?.vat / (1+selectedPlan?.vat)) / 100  : selectedPlan?.amount * selectedPlan?.vat/100) +\r\n                        (selectedUserAddOns ? (selectedUserAddOns?.amountInclVat ? selectedUserAddOns?.amount * (selectedUserAddOns?.vat / (1+selectedUserAddOns?.vat)) / 100  : selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0) + \r\n                        (selectedSedaAddOns ? (selectedSedaAddOns?.amountInclVat ? selectedSedaAddOns?.amount * (selectedSedaAddOns?.vat / (1+selectedSedaAddOns?.vat)) / 100  : selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0)\r\n                        )\r\n                        | number: \'1.0-0\' | replace}}</span>\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th colspan="5">\r\n                    <span class="pull-right">Total (incl. VAT)</span>\r\n                </th>\r\n                <th>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{\r\n                        ((selectedPlan.amountInclVat ? selectedPlan?.amount/100 : selectedPlan?.amount/100 + selectedPlan?.amount * selectedPlan?.vat/100) +\r\n                        (selectedUserAddOns ? (selectedUserAddOns?.amountInclVat ? selectedUserAddOns?.amount/100 : selectedUserAddOns?.amount/100 + selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0) + \r\n                        (selectedSedaAddOns ? (selectedSedaAddOns?.amountInclVat ? selectedSedaAddOns?.amount/100 : selectedSedaAddOns?.amount/100 + selectedSedaAddOns?.amount * selectedUserAddOns?.vat/100) : 0)                       \r\n                        )\r\n                        | number: \'1.0-0\' | replace}}</span>\r\n                </th>\r\n            </tr>\r\n            <tr *ngIf="selectedCouponCode">\r\n                <th colspan="5">\r\n                    <span class="pull-right">Coupon ({{selectedCouponCode.name}})</span>\r\n                </th>\r\n                <th>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} - {{\r\n                        ( \r\n                            selectedCouponCode.amount ? selectedCouponCode.amount/100 : ((selectedPlan.amountInclVat ? selectedPlan?.amount/100 : selectedPlan?.amount/100 + selectedPlan?.amount * selectedPlan?.vat/100) +\r\n                            (selectedUserAddOns ? (selectedUserAddOns?.amountInclVat ? selectedUserAddOns?.amount/100 : selectedUserAddOns?.amount/100 + selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0) + \r\n                            (selectedSedaAddOns ? (selectedSedaAddOns?.amountInclVat ? selectedSedaAddOns?.amount/100 : selectedSedaAddOns?.amount/100 + selectedSedaAddOns?.amount * selectedUserAddOns?.vat/100) : 0))/100*selectedCouponCode.percentage\r\n                        )\r\n                        \r\n                        | number: \'1.0-0\' | replace}}</span>\r\n                </th>\r\n            </tr>\r\n            <tr *ngIf="selectedCouponCode">\r\n                <th colspan="5">\r\n                    <span class="pull-right">Total</span>\r\n                </th>\r\n                <th>\r\n                    <span class="pull-right">{{selectedPlan?.currency}} {{\r\n                        ((selectedPlan.amountInclVat ? selectedPlan?.amount/100 : selectedPlan?.amount/100 + selectedPlan?.amount * selectedPlan?.vat/100) +\r\n                        (selectedUserAddOns ? (selectedUserAddOns?.amountInclVat ? selectedUserAddOns?.amount/100 : selectedUserAddOns?.amount/100 + selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0) + \r\n                        (selectedSedaAddOns ? (selectedSedaAddOns?.amountInclVat ? selectedSedaAddOns?.amount/100 : selectedSedaAddOns?.amount/100 + selectedSedaAddOns?.amount * selectedUserAddOns?.vat/100) : 0)) -\r\n                        ( \r\n                            selectedCouponCode.amount ? selectedCouponCode.amount/100 : ((selectedPlan.amountInclVat ? selectedPlan?.amount/100 : selectedPlan?.amount/100 + selectedPlan?.amount * selectedPlan?.vat/100) +\r\n                            (selectedUserAddOns ? (selectedUserAddOns?.amountInclVat ? selectedUserAddOns?.amount/100 : selectedUserAddOns?.amount/100 + selectedUserAddOns?.amount * selectedUserAddOns?.vat/100) : 0) + \r\n                            (selectedSedaAddOns ? (selectedSedaAddOns?.amountInclVat ? selectedSedaAddOns?.amount/100 : selectedSedaAddOns?.amount/100 + selectedSedaAddOns?.amount * selectedUserAddOns?.vat/100) : 0))/100*selectedCouponCode.percentage\r\n                        )\r\n                        | number: \'1.0-0\' | replace}}</span>\r\n                </th>\r\n            </tr>\r\n        </tfoot>\r\n    </table>\r\n    <p>{{\'Subscription.Explanation\' | translate}}</p>\r\n    <p *ngIf="card"><span [innerHtml]="\'Subscription.ReuseCard\'| translate:{maskedCard: card?.masked_card}"></span> <a href=\'javascript:void(0)\' (click)=\'continue(true)\'>{{\'Subscription.Here\' | translate}}</a>.</p>\r\n\r\n    <div class="pmd-modal-action pmd-modal-bordered text-right">\r\n        <button class="btn pmd-ripple-effect btn-primary" type="button" (click)="continue(false)" *ngIf="selectedPlan.isCancelled">{{\'Subscription.ConfirmReactivate\' | translate}}</button>\r\n        <button class="btn pmd-ripple-effect btn-primary" type="button" (click)="continue(false)" *ngIf="!isViewCurrentPlan && !selectedPlan.isCancelled">{{\'Subscription.Confirm\' | translate}}</button>\r\n        <button class="btn pmd-ripple-effect btn-primary" type="button" (click)="cancelPlan()" *ngIf="isViewCurrentPlan">{{\'Subscription.CancelSubcription\' | translate}}</button>\r\n        <button class="btn pmd-ripple-effect btn-default" type="button" (click)="close()">{{\'Subscription.Cancel\' | translate}}</button>\r\n    </div>\r\n</modal-dialog>\r\n<div class="container" *ngIf="ready">\r\n    <div class="text-center">\r\n        <h2>{{\'Subscription.Title\' | translate}}</h2>\r\n    </div>\r\n    <div class="row mt30 row-eq-height">\r\n        <div class="col-xs-4 col-xs-offset-2">\r\n            <div class="pmd-card pmd-z-depth" style="height: 100%; margin-bottom: 0;">\r\n                <div class="pmd-card-body">\r\n                    <h2>{{\'Subscription.YourCurrentUsage\' | translate}}</h2>\r\n                    <table class="current-plan-info">\r\n                        <tr>\r\n                            <td>{{\'Subscription.NumberOfProcesses\' | translate}}</td>\r\n                            <td><strong>{{currentStatus.noOfProcesses}}/{{currentStatus.maxProcesses}} {{\'Subscription.Available\' | translate}}</strong></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>{{\'Subscription.NumberOfUsers\' | translate}}</td>\r\n                            <td><strong>{{currentStatus.noOfUsers}}/{{currentStatus.maxUsers}} {{\'Subscription.Available\' | translate}}</strong></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>{{\'Subscription.StorageInUse\' | translate}}</td>\r\n                            <td><strong>{{currentStatus.noOfStorage}}MB/{{currentStatus.maxStorage}}MB {{\'Subscription.Available\' | translate}}</strong></td>\r\n                        </tr>\r\n                    </table>\r\n                    <i>{{\'Subscription.CurrentBlockSmallText\' | translate}}</i>\r\n                </div>\r\n             </div>\r\n        </div>\r\n        <div class="col-xs-4">\r\n            <div class="pmd-card pmd-z-depth" style="height: 100%; margin-bottom: 0;">\r\n                <div class="pmd-card-body">\r\n                    <h2>{{\'Subscription.ChooseYourBilling\' | translate}}</h2>\r\n                    <table class="subscription-type">\r\n                        <tr>\r\n                            <td><span class="text-uppercase">{{\'Subscription.Monthly\' | translate}}</span> </td>\r\n                            <td>\r\n                                <label class="custom-switch" for="custom-switch">\r\n                                    <input type="checkbox" id="custom-switch" [(ngModel)]="frequency" (change)="frequencyChange()">\r\n                                    <span class="custom-switch__button"></span>\r\n                                </label>\r\n                            </td>\r\n                            <td> <span class="text-uppercase">{{\'Subscription.Annually\' | translate}}</span></td>\r\n                        </tr>\r\n                    </table>\r\n                    <i>{{\'Subscription.IntervalBlockSmallText\' | translate}}</i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row mt30">\r\n        <div class="col-xs-4 col-xs-offset-4">\r\n            <div class="text-center">\r\n                {{\'Subscription.SmallTextDescription\' | translate}}<br/>\r\n                <a href="https://www.complyto.com/da/priser" target="_blank" *ngIf="lang == \'da\'">{{\'Subscription.SmallLink\' | translate}}</a>\r\n                <a href="https://www.complyto.com/da/priser" target="_blank" *ngIf="lang == \'en\'">{{\'Subscription.SmallLink\' | translate}}</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-xs-4" *ngFor="let plan of billingPlans | filterBy: billingPlansFilter">\r\n            <div class="cancel-alert" [ngClass]="{\'active\': plan.isCancelled}" *ngIf="currentStatus.isCancelled">\r\n                <div class="cancel-alert__title">\r\n                    <i class="material-icons">error</i> {{\'Subscription.CancelErrorTitle\' | translate}}\r\n                </div>\r\n                <div class="cancel-alert__exp">\r\n                    {{\'Subscription.CancelErrorExp\' | translate}}: {{currentStatus.expireDate | dateformatpipe:true}}\r\n                </div>\r\n                <a href="javascript:void(0)" class="cancel-alert__link" (click)="onClickPurchasePlan(plan)">{{\'Subscription.CancelErrorLinkText\' | translate}}</a>\r\n            </div>\r\n            \x3c!--Media, Title, Description and Action area --\x3e\r\n            <div class="pmd-card pmd-card-default pmd-z-depth price-card" [ngClass]="{\'price-card-active\': plan.billingPlanId == selectedPlan?.billingPlanId, \'open\': plan.isOpen, \'active\': plan.isCurrent,  \'disable\': plan.isDisabled, \'has-coupon\': !currentStatus.currentPlan}">\r\n                <div class="price-card__overlay" (click)="clickPlan(plan)"></div>\r\n                <div class="price-card__label" *ngIf="plan.isCurrent">{{\'Subscription.CurrentPlan\' | translate}}</div>\r\n                \x3c!-- Card header --\x3e\r\n                <div class="pmd-card-title">\r\n                    <h2 class="pmd-card-title-text text-center">{{plan.planName}}</h2>\r\n                </div>\r\n\r\n                \x3c!-- Card body --\x3e\r\n                <div class="pmd-card-body">\r\n                    <div class="price">\r\n                        <span class="price__unit">{{plan.currency}}</span>\r\n                        <span class="price__number">{{plan.amount/100 | number: \'1.0-0\' | replace}}</span>\r\n                        <span class="price__ex" *ngIf="!frequency">/ {{\'Subscription.Month\' | translate}}</span>\r\n                        <span class="price__ex" *ngIf="frequency">/ {{\'Subscription.Year\' | translate}}</span>\r\n                    </div>\r\n                    <ul class="feature-list">\r\n                        \x3c!-- <li>\r\n                            <strong>{{plan.vat | percent}} {{\'Subscription.VatIncluded\' | translate}}</strong>\r\n                        </li>\r\n                        <li>\r\n                            <strong>{{plan.maximumUsers}} {{\'Subscription.TeamMembers\' | translate}}</strong>\r\n                        </li> --\x3e\r\n                        <li *ngFor="let line of plan.description.split(\'\\n\')">\r\n                            <strong>{{line}}</strong>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="add-ons-block">\r\n                        <ul class="list-unstyled addons">\r\n                            <li><strong>{{\'Subscription.AdditionalUsers\' | translate}}:</strong></li>\r\n                            <li *ngFor="let addOn of listAddOns | filterBy: {addOnType: \'user\'} | filterBy: addOnsFilter">\r\n                                <div class="radio" *ngIf="addOn.amount == 0" [ngClass]="{\'disabled\': addOn.isDisabled}">\r\n                                    <label class="pmd-radio pmd-radio-ripple-effect">\r\n                                        <input type="radio" name=`{{plan.planName}}AdditionalUsers` (change)="onCheckAddOns(addOn, plan)" [disabled]="addOn.isDisabled" [checked]="addOn.isChecked">\r\n                                        <span class="pmd-radio-label">&nbsp;</span>\r\n                                        <span>{{\'Subscription.AdditionalUsersNoThank\' | translate}}</span>\r\n                                    </label>\r\n                                </div>\r\n                                <div class="radio" *ngIf="addOn.amount > 0" [ngClass]="{\'disabled\': addOn.isDisabled}">\r\n                                    <label class="pmd-radio pmd-radio-ripple-effect">\r\n                                        <input type="radio" name=`{{plan.planName}}AdditionalUsers` (change)="onCheckAddOns(addOn, plan)" [disabled]="addOn.isDisabled" [checked]="addOn.isChecked">\r\n                                        <span class="pmd-radio-label">&nbsp;</span>\r\n                                        <span>{{addOn.addOnName}}, {{plan.currency}} {{addOn.amount/100 | number: \'1.0-0\' | replace}}</span>\r\n                                    </label>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                        <ul class="list-unstyled addons">\r\n                            <li><strong>{{\'Subscription.AddExtraStorage\' | translate}}:</strong></li>\r\n                            <li *ngFor="let addOn of listAddOns | filterBy: {addOnType: \'seda\'} | filterBy: addOnsFilter">\r\n                                <div class="radio" *ngIf="addOn.amount == 0" [ngClass]="{\'disabled\': addOn.isDisabled}">\r\n                                    <label class="pmd-radio pmd-radio-ripple-effect">\r\n                                        <input type="radio" name=`{{plan.planName}}AddExtraStorage` (change)="onCheckAddOns(addOn, plan)" [disabled]="addOn.isDisabled" [checked]="addOn.isChecked">\r\n                                        <span class="pmd-radio-label">&nbsp;</span>\r\n                                        <span>{{\'Subscription.AddExtraStorageNoThank\' | translate}}</span>\r\n                                    </label>\r\n                                </div>\r\n                                <div class="radio" *ngIf="addOn.amount > 0" [ngClass]="{\'disabled\': addOn.isDisabled}">\r\n                                    <label class="pmd-radio pmd-radio-ripple-effect">\r\n                                        <input type="radio" name=`{{plan.planName}}AddExtraStorage` (change)="onCheckAddOns(addOn, plan)" [disabled]="addOn.isDisabled" [checked]="addOn.isChecked">\r\n                                        <span class="pmd-radio-label">&nbsp;</span>\r\n                                        <span>{{addOn.addOnName}}, {{plan.currency}} {{addOn.amount/100 | number: \'1.0-0\' | replace}}</span>\r\n                                    </label>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                        <div *ngIf="!currentStatus.currentPlan" class="form-group pmd-textfield pmd-textfield-floating-label" [ngClass]="{\'pmd-textfield-floating-label-completed\': couponCode}">\r\n                            <label for="couponCode" class="control-label">\r\n                                {{\'Subscription.CouponQuestion\' | translate}}\r\n                            </label>\r\n                            <input maxlength="256" type="text" class="form-control" name="couponCode" [(ngModel)]="couponCode">\r\n                            <span class="pmd-textfield-focused"></span>\r\n                        </div>\r\n                        <button type="button"class="btn btn-block pmd-ripple-effect btn-primary" *ngIf="plan.isCancelled && currentStatus.isCancelled" (click)="onClickPurchasePlan(plan)">{{\'Subscription.ViewOrResubscribe\' | translate}}</button>\r\n                        <button type="button"class="btn btn-block pmd-ripple-effect btn-default active" *ngIf="plan.isCurrent && !changeCurrentPlanBtn && !plan.isCancelled" (click)="viewCurrentPlan(plan)">{{\'Subscription.ViewOrCancelPlan\' | translate}}</button>\r\n                        <button type="button" (click)="onClickPurchasePlan(plan)" class="btn btn-block pmd-ripple-effect btn-primary" *ngIf="!plan.isCancelled && !plan.isCurrent || (plan.isCurrent && changeCurrentPlanBtn)">{{\'Subscription.SubscribeNow\' | translate}}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<input type="hidden" id="reepay-card-token" />\r\n<input type="hidden" id="reepay-masked-card-number" />\r\n<input type="hidden" id="reepay-exp-year" />\r\n<input type="hidden" id="reepay-exp-month" />\r\n<input type="hidden" id="reepay-fingerprint" />\r\n<input type="hidden" id="reepay-card-type" />'},"Tyk+":function(t,n){t.exports='<div class="container" *ngIf="isLoaded">\r\n    \x3c!-- Card header --\x3e\r\n    <div class="pmd-card pmd-card-default pmd-z-depth pmd-card-custom-form">\r\n        <div class="pmd-card-title">\r\n            <h2 class="pmd-card-title-text">{{ \'Subscription.SubscriptionHistoryTitle\' | translate }}</h2>\r\n        </div>\r\n        <div class="pmd-card-body row">\r\n            <div class="col-xs-6">\r\n                <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <p class="pull-right"><strong>{{ \'Subscription.Plan\' | translate }}</strong></p>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        <p>{{plan?.name}}</p>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <p class="pull-right"><strong>{{ \'Subscription.CreatedOn\' | translate }}</strong></p>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        <p>{{subscription?.created | dateformatpipe: true}}</p>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <p class="pull-right"><strong>{{ \'Subscription.Status\' | translate }}</strong></p>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                            <div *ngIf="subscription?.in_trial" class="pmd-chip pmd-chip-no-icon active">In Trial - {{ subscription?.remaining }} days remaining</div>\r\n                            <div *ngIf="!subscription?.in_trial" class="pmd-chip pmd-chip-no-icon active" [ngClass]="{\'active\': subscription?.state === \'active\', \'inactive\': subscription?.state !== \'active\'}">{{subscription?.state}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <p class="pull-right"><strong>{{ \'Subscription.GracePeriod\' | translate }}</strong></p>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        <p>{{subscription?.grace_duration / 86400}} days</p>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <p class="pull-right"><strong>Trial Period</strong></p>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        <p>{{subscription?.trial_start | date: \'MM/dd/yy, HH:mm\'}} to {{subscription?.trial_end | date: \'MM/dd/yy, HH:mm\'}}</p>\r\n                    </div>\r\n                </div> --\x3e\r\n            </div>\r\n            <div class="col-xs-6">\r\n                <div class="row">\r\n                    <h3 class="text-center"><strong>{{ \'Subscription.TotalNoVat\' | translate }}</strong></h3>\r\n                    <h3 class="text-center">{{plan?.currency}} <span class="plan-price">{{plan?.amount / 100 | number: \'1.2-2\' | replace}}</span> / every month</h3>\r\n                </div>\r\n            </div>\r\n           \r\n        </div>\r\n    </div>\r\n    <div class="pmd-card pmd-card-default pmd-z-depth pmd-card-custom-form">\r\n            <div class="pmd-card-body row">\r\n                    <div class="col-xs-4">\r\n                            <h3 class="text-center"><strong>{{ \'Subscription.FirstPeriodStart\' | translate }}</strong></h3>\r\n                            <p class="text-center">{{subscription?.first_period_start | dateformatpipe: true}}</p>\r\n                    </div>\r\n                    <div class="col-xs-4">\r\n                            <h3 class="text-center"><strong>{{ \'Subscription.CurrentPeriodStart\' | translate }}</strong></h3>\r\n                            <p class="text-center" *ngIf="subscription?.current_period_start">{{subscription?.current_period_start | dateformatpipe:true}}</p>\r\n                            <p class="text-center" *ngIf="!subscription?.current_period_start">No active period</p>\r\n                    </div>\r\n                    <div class="col-xs-4" *ngIf="!subscription.is_cancelled">\r\n                            <h3 class="text-center"><strong>{{ \'Subscription.NextPeriodStart\' | translate }}</strong></h3>\r\n                            <p class="text-center">{{subscription?.next_period_start | dateformatpipe:true}}</p>\r\n                    </div>\r\n                    <div class="col-xs-4" *ngIf="subscription.is_cancelled">\r\n                        <div class="cancel-alert__title">\r\n                            <i class="material-icons">error</i> {{\'Subscription.CancelErrorTitle\' | translate}}\r\n                        </div>\r\n                        <div class="cancel-alert__exp">\r\n                            {{\'Subscription.CancelErrorExp\' | translate}}: {{subscription.expires | dateformatpipe:true}}\r\n                        </div>\r\n                        <a href="/billing-plan?q=resubcribe" class="cancel-alert__link">{{\'Subscription.CancelErrorLinkText\' | translate}}</a>\r\n                    </div>\r\n            </div>\r\n    </div>\r\n\r\n    <div class="pmd-card pmd-card-default pmd-z-depth pmd-card-custom-form">\r\n        <div class="pmd-card-title">\r\n            <h2 class="pmd-card-title-text">Your billing history</h2>\r\n        </div>\r\n        <div>\r\n            <ngx-datatable #historyTable class="material expandable" [loadingIndicator]="loadingIndicator" [rows]="rows" [columnMode]="\'force\'"\r\n                [headerHeight]="40" [footerHeight]="50" [rowHeight]="\'auto\'" [externalPaging]="true" [count]="page.totalElements"\r\n                [offset]="page.pageNumber - 1" [limit]="page.itemsPerPage" (page)=\'paginate($event)\'>\r\n\r\n                <ngx-datatable-row-detail [rowHeight]="\'auto\'" #invoiceDetailRow>\r\n                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>\r\n                        <div style="padding-left:60px;">\r\n                            <p>{{ \'Subscription.LineItems\' | translate }}</p>\r\n                            <table class="table pmd-table table-sm">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>#</th>\r\n                                        <th>{{ \'Subscription.Description\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.From\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.To\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.Vat\' | translate }}</th>\r\n                                        <th><span class="pull-right">{{ \'Subscription.TotalNoVat\' | translate }}</span></th>\r\n                                        <th><span class="pull-right">{{ \'Subscription.TotalVat\' | translate }}</span></th>\r\n                                        <th><span class="pull-right">{{ \'Subscription.TotalIncVat\' | translate }}</span></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor="let item of row.order_lines; let i = index">\r\n                                        <th>{{i + 1}}</th>\r\n                                        <td>{{item.ordertext}}</td>\r\n                                        <td>{{item.period_from | dateformatpipe:true}}</td>\r\n                                        <td>{{item.period_to | dateformatpipe:true}}</td>\r\n                                        <td>{{item.vat | percent}}</td>\r\n                                        <td><span class="pull-right">{{item.amount_ex_vat/100 | number: \'1.2-2\' | replace}}</span> </td>\r\n                                        <td><span class="pull-right">{{item.amount_vat/100 | number: \'1.2-2\' | replace}}</span></td>\r\n                                        <td><span class="pull-right">{{item.amount/100  | number: \'1.2-2\' | replace}}</span></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th colspan="7"><span class="pull-right">{{ \'Subscription.TotalNoVat\' | translate }}</span></th>\r\n                                        <th><span class="pull-right">{{row.currency}} {{row.amount_ex_vat/100 | number: \'1.2-2\' | replace}}</span></th>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <th colspan="7"><span class="pull-right">{{ \'Subscription.Vat\' | translate }}</span></th>\r\n                                        <th><span class="pull-right">{{row.currency}} {{row.amount_vat/100 | number: \'1.2-2\' | replace}}</span></th>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <th colspan="7"><span class="pull-right">{{ \'Subscription.TotalIncVat\' | translate }}</span></th>\r\n                                        <th><span class="pull-right">{{row.currency}} {{row.amount/100 | number: \'1.2-2\' | replace}}</span></th>\r\n                                    </tr>\r\n\r\n                                </tfoot>\r\n                            </table>\r\n\r\n                            <p>{{ \'Subscription.PaymentsAndRefunds\' | translate }}</p>\r\n                            <table class="table pmd-table table-sm">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>#</th>\r\n                                        <th>{{ \'Subscription.Date\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.Type\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.PaymentMethod\' | translate }}</th>\r\n                                        <th>{{ \'Subscription.Status\' | translate }}</th>\r\n                                        <th><span class="pull-right">{{ \'Subscription.Amount\' | translate }}</span></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr *ngFor="let item of row.transactions; let i = index">\r\n                                        <th>{{i + 1}}</th>\r\n                                        <td>{{item.created | dateformatpipe:true}}</td>\r\n                                        <td>{{item.type}}</td>\r\n                                        <td>{{item.card_transaction == null ? \'\' : item.card_transaction.masked_card}}</td>\r\n                                        <td>{{item.state}}</td>\r\n                                        <td><span class="pull-right">{{item.amount/100  | number: \'1.2-2\' | replace}}</span></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                                <tfoot>\r\n                                    <tr>\r\n                                        <th colspan="5"><span class="pull-right">Total Amount</span></th>\r\n                                        <th><span class="pull-right">{{row.currency}} {{(row.amount - row.refunded_amount)/100 | number: \'1.2-2\' | replace}}</span></th>\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n                        </div>\r\n                    </ng-template>\r\n                </ngx-datatable-row-detail>\r\n\r\n                <ngx-datatable-column [width]="50" [resizeable]="false" [sortable]="false" [draggable]="false" [canAutoResize]="false">\r\n                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>\r\n                        <a href="javascript:void(0);" [class.datatable-icon-right]="!expanded" [class.datatable-icon-down]="expanded" (click)="toggleExpandRow(row)">\r\n                    </a>\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n\r\n\r\n                <ngx-datatable-column prop="state" [width]="70">\r\n                    <ng-template ngx-datatable-header-template><strong>{{ \'Subscription.Status\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" ngx-datatable-cell-template>\r\n                        <div class="pmd-chip pmd-chip-no-icon" [ngClass]="value">{{value}}</div>\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="type" [width]="70">\r\n                    <ng-template ngx-datatable-header-template><strong>{{ \'Subscription.Type\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" ngx-datatable-cell-template>{{value === \'s\' ? \'Recurring\' : (value === \'so\' || value === \'soi\' || value === \'co\' ? \'One-time\' : \'Charge\')}}</ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="number" [width]="70">\r\n                    <ng-template ngx-datatable-header-template><strong>{{ \'Subscription.InvoiceNo\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" ngx-datatable-cell-template>#{{value}}</ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="created">\r\n                    <ng-template ngx-datatable-header-template><strong>{{ \'Subscription.BilledOn\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" ngx-datatable-cell-template>{{value | dateformatpipe:true}}</ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="due">\r\n                    <ng-template ngx-datatable-header-template><strong>{{ \'Subscription.DueOn\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" ngx-datatable-cell-template>{{value | dateformatpipe:true}}</ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="refunded_amount" [width]="100">\r\n                    <ng-template ngx-datatable-header-template><strong class="pull-right">{{ \'Subscription.Refunded\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>\r\n                        <div class="text-right">\r\n                            <span *ngIf="row.refunded_amount">{{row.currency}}</span>\r\n                            <span *ngIf="row.refunded_amount">{{value/100 | number: \'1.2-2\' | replace}}</span>\r\n                        </div>\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n\r\n                <ngx-datatable-column prop="amount" [width]="100">\r\n                    <ng-template ngx-datatable-header-template><strong class="pull-right">{{ \'Subscription.Amount\' | translate }}</strong></ng-template>\r\n                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>\r\n                        <div class="text-right">\r\n                            <span>{{row.currency}}</span>\r\n                            <span>{{value/100 | number: \'1.2-2\' | replace}}</span>\r\n                        </div>\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n            </ngx-datatable>\r\n        </div>\r\n    </div>\r\n</div>'},bo4y:function(t,n){t.exports='<div mat-dialog-content class="mt20">\r\n    {{ \'Subscription.UnableToDowngrade\' | translate}}\r\n</div>\r\n<div mat-dialog-actions >\r\n  <div class="text-right">\r\n      <button class="btn pmd-ripple-effect btn-default active" (click)="onNoClick()" type="button">{{ \'Subscription.CancelConfirmSubscriptionBackBtn\' | translate}}</button> \r\n  </div>\r\n</div>'},ciNO:function(t,n){t.exports='<h1>{{ \'Subscription.CancelConfirmSubscriptionTitle\' | translate}}</h1>\r\n<h3 class="mt10">{{ \'Subscription.CancelConfirmSubscriptionSubTitle\' | translate}}</h3>\r\n<div mat-dialog-content class="mt20">\r\n    {{ \'Subscription.CancelConfirmSubscriptionContent\' | translate}}\r\n</div>\r\n<div mat-dialog-actions class="text-right">\r\n  <button class="btn pmd-ripple-effect btn-default" (click)="onNoClick()" type="button">{{ \'Subscription.CancelConfirmSubscriptionBackBtn\' | translate}}</button> \r\n  <button class="btn pmd-ripple-effect btn-primary ml10" [mat-dialog-close]="confirmValue" type="button">{{ \'Subscription.CancelConfirmSubscriptionConfirmBtn\' | translate}}</button>\r\n</div>'},zV1i:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("WT6e"),a=e("Xjw4"),s=e("7DMc"),l=e("8A5H"),i=e("obU/"),d=e("ItHS"),c=e("bfOx"),o=e("vKAU"),p=e("lYsT"),u=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},h=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},m=function(){function t(t,n){this._data=t,this._translate=n}return t.prototype.ngOnInit=function(){var t=this._data.getDefaultLanguage();this._translate.setDefaultLang(t)},t=u([Object(r.Component)({selector:"billing-plan",template:"<router-outlet></router-outlet>",animations:[Object(o.a)()],host:{"[@fadeTransition]":""}}),h("design:paramtypes",[p.a,l.c])],t)}(),b=e("OE0E"),f=(e("EN1B"),e("byKF")),g=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},v=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},y=function(){function t(t){this._http=t}return t.prototype.getBillingPlan=function(){return this._http.get(f.a.GET_BILLING_PLANS_URL).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.getCurrentStatus=function(){return this._http.get(f.a.GET_CURRENT_BILLING_PLANS_URL).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.getAddonsPlan=function(){return this._http.get(f.a.GET_ADDONS_PLANS_URL).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.checkPaymentMethod=function(){return this._http.get(f.a.CHECK_PAYMENT_METHOD_URL).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.changeSubscription=function(t){return this._http.post(f.a.CHANGE_SUBSCRIPTION_URL,JSON.stringify(t)).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.cancelSubscription=function(){return this._http.post(f.a.CANCEL_SUBCRIPTION_URL,"").toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.getCouponInfo=function(t,n){return this._http.get(f.a.GET_COUPON_INFO_URL+"/"+t+"?plan="+n).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.getSubscriptionHistory=function(t){return this._http.get(f.a.GET_SUBSCRIPTION_HISTORY_URL+"?page="+t.pageNumber+"&size="+t.itemsPerPage).toPromise().then(function(t){return t}).catch(this.handleError)},t.prototype.handleError=function(t){return Promise.reject(t.message||t)},t=g([Object(r.Injectable)(),v("design:paramtypes",[d.HttpClient])],t)}(),O=e("fln1"),S=e("XZJt"),_=e("3Bd6"),x=e("DUFE"),P=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},A=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},C=this&&this.__param||function(t,n){return function(e,r){n(e,r,t)}},w=function(){function t(t,n){this.dialogRef=t,this.confirm=n,this.confirmValue=!0}return t.prototype.onNoClick=function(){this.dialogRef.close()},t=P([Object(r.Component)({template:e("ciNO")}),C(1,Object(r.Inject)(x.e)),A("design:paramtypes",[x.g,Boolean])],t)}(),k=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},I=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},U=this&&this.__param||function(t,n){return function(e,r){n(e,r,t)}},R=function(){function t(t,n){this.dialogRef=t,this.confirm=n,this.confirmValue=!0}return t.prototype.onNoClick=function(){this.dialogRef.close()},t=k([Object(r.Component)({template:e("bo4y")}),U(1,Object(r.Inject)(x.e)),I("design:paramtypes",[x.g,Boolean])],t)}(),T=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},j=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},E=this&&this.__param||function(t,n){return function(e,r){n(e,r,t)}},D=function(){function t(t,n,e,r,a,s,l,i){var d=this;this._billingPlanService=t,this._data=n,this._alert=e,this._router=r,this._activatedRoute=a,this._translate=s,this._matDialog=l,this._document=i,this.currentPlanOrder=0,this.currentAddOns=[],this.changeCurrentPlanBtn=!1,this.billingPlansFilter={frequency:"monthly"},this.addOnsFilter={addOnFrequency:"monthly"},this.frequency=!1,this.isViewCurrentPlan=!1;var c=S.a.interval(200).subscribe(function(){var t=document.getElementById("reepay-card-token");if(t){var n=t;n.value&&(d.submit(n.value),document.getElementById("reepay-card-token").value="")}else c.unsubscribe()})}return t.prototype.ngOnInit=function(){var t=this;this._data.changeLoadStatus(!0),this._translate.get("Subscription.ConfirmYourSubscription").subscribe(function(n){return t.confirmDialog=new _.a(n,"modal-lg",!1)});var n=localStorage.getItem("lang");this.lang="en",n&&(this.lang=JSON.parse(n).languageCode.split("-")[0]),window.reepaytoken.configure({key:window.reepayDK,language:this.lang,ready:function(){},token:function(t){},close:function(){}}),this._billingPlanService.getCurrentStatus().then(function(n){console.log("currentstatus",n),t.currentStatus=n,t.ready=!0,t._billingPlanService.getBillingPlan().then(function(n){t.billingPlans=n;var e=n.filter(function(t){return t.isCurrent})[0];if(e&&(t.currentPlanOrder=e.order),t._activatedRoute.params.subscribe(function(n){"current"===n.plan&&t.purchasePlan(e)}),t.currentStatus.isCancelled){var r=t.billingPlans.filter(function(n){return n.billingPlanId==t.currentStatus.currentPlan});r[0].isCancelled=!0,t._activatedRoute.queryParams.subscribe(function(n){"resubcribe"==n.q&&t.onClickPurchasePlan(r[0])})}t._billingPlanService.getAddonsPlan().then(function(n){n.forEach(function(t){t.isChecked=!1}),t.listAddOns=n,t.listAddOns.unshift({reepayAddOnId:"user_remove_addon",addOnType:"user",amount:0,addOnFrequency:"monthly"}),t.listAddOns.unshift({reepayAddOnId:"user_remove_addon",addOnType:"user",amount:0,addOnFrequency:"yearly"}),t.listAddOns.unshift({reepayAddOnId:"seda_remove_addon",addOnType:"seda",amount:0,addOnFrequency:"monthly"}),t.listAddOns.unshift({reepayAddOnId:"seda_remove_addon",addOnType:"seda",amount:0,addOnFrequency:"yearly"}),t.billingPlans.forEach(function(n){if((t.currentStatus.noOfProcesses>n.maximumProcesses||t.currentStatus.noOfStorage>n.maximumStorage||t.currentStatus.noOfUsers>n.maximumUsers)&&(n.isDisabled=!0),n.isCurrent){if(t.currentStatus.currentAddOns.forEach(function(n){t.currentAddOns.push(n)}),1==t.currentStatus.currentAddOns.length)"user"==t.listAddOns.find(function(n){return n.reepayAddOnId==t.currentStatus.currentAddOns[0]}).addOnType?t.currentAddOns.unshift("seda_remove_addon"):t.currentAddOns.unshift("user_remove_addon");t.clickPlan(n)}}),t._data.changeLoadStatus(!1)})})})},t.prototype.setDefaultRadio=function(t){t.isCurrent?this.setCurrentAddOns():(this.resetRadioChecked(),this.listAddOns.forEach(function(t){0==t.amount&&(t.isChecked=!0)}))},t.prototype.resetRadioChecked=function(){this.selectedSedaAddOns=void 0,this.selectedUserAddOns=void 0,this.listAddOns.forEach(function(t){t.isChecked=!1})},t.prototype.setCurrentAddOns=function(){var t=this;this.resetRadioChecked(),this.currentAddOns.forEach(function(n){var e=t.listAddOns.find(function(t){return t.reepayAddOnId==n});return e.isChecked=!0,e})},t.prototype.frequencyChange=function(){this.frequency?(this.billingPlansFilter.frequency="yearly",this.addOnsFilter.addOnFrequency="yearly"):(this.billingPlansFilter.frequency="monthly",this.addOnsFilter.addOnFrequency="monthly")},t.prototype.onCheckAddOns=function(t,n){if(this.listAddOns.forEach(function(n){n.addOnType==t.addOnType&&(n.isChecked=!1)}),t.isChecked=!0,"user"==t.addOnType?"user_remove_addon"==t.reepayAddOnId?this.selectedUserAddOns=void 0:this.selectedUserAddOns=t:"seda"==t.addOnType&&("seda_remove_addon"==t.reepayAddOnId?this.selectedSedaAddOns=void 0:this.selectedSedaAddOns=t),n.isCurrent){var e=[];this.listAddOns.forEach(function(t){t.isChecked&&e.push(t.reepayAddOnId)});var r=this.compareArray(e,this.currentAddOns);this.changeCurrentPlanBtn=!r}},t.prototype.clickPlan=function(t){this.couponCode=null,this.selectedCouponCode=null,this.billingPlans.forEach(function(t){t.isOpen=!1}),t.isOpen=!0,this.setDefaultRadio(t),this.changeCurrentPlanBtn=!1},t.prototype.onClickPurchasePlan=function(t){this._data.changeLoadStatus(!0),this.couponCode?this.checkCoupon(t):this.purchasePlan(t)},t.prototype.checkCoupon=function(t){var n=this;this._billingPlanService.getCouponInfo(this.couponCode,t.billingPlanId).then(function(e){var r=e.errors;r?(n._translate.get(r).subscribe(function(t){return n._alert.error(t)}),n.couponCode=null,n._data.changeLoadStatus(!1)):(n.selectedCouponCode=e,n.purchasePlan(t))})},t.prototype.purchasePlan=function(t){var n=this,e=(+new Date(this.currentStatus.periodEndDate)-+new Date)/36e5;if(console.log(e),t.order<this.currentPlanOrder&&e>24){this._data.changeLoadStatus(!1);this._matDialog.open(R,{width:"400px"})}else this.selectedPlan=t,this._billingPlanService.checkPaymentMethod().then(function(t){t.cards&&t.cards.length>0&&(n.card=t.cards[0]),n.confirmDialog.visible=!0,n._data.changeLoadStatus(!1)})},t.prototype.viewCurrentPlan=function(t){var n=this;this._data.changeLoadStatus(!0),this.selectedPlan=t,this._billingPlanService.checkPaymentMethod().then(function(t){t.card&&t.cards.length>0&&(n.card=t.card[0]),n.confirmDialog.visible=!0,n.isViewCurrentPlan=!0,n._data.changeLoadStatus(!1)})},t.prototype.cancelPlan=function(){var t=this;this._matDialog.open(w,{width:"400px"}).afterClosed().subscribe(function(n){n&&t._billingPlanService.cancelSubscription().then(function(n){t.confirmDialog.visible=!1,t._router.navigate(["billing-plan","history"])})})},t.prototype.continue=function(t){this.confirmDialog.visible=!1,t?window.reepaytoken.open():this.card?this.submit(""):window.reepaytoken.open()},t.prototype.submit=function(t){var n=this;this._data.changeLoadStatus(!0);var e={cardToken:t,planId:this.selectedPlan.billingPlanId,addOnIds:[],couponCodes:[]};this.listAddOns.forEach(function(t){t.isChecked&&t.amount>0&&e.addOnIds.push(t.reepayAddOnId)}),this.selectedCouponCode&&e.couponCodes.push(this.couponCode),this._billingPlanService.changeSubscription(e).then(function(t){if(n._data.changeLoadStatus(!1),t.error)n._alert.error(t.error,null,!0,!0);else{for(var e in n._translate.get("Subscription.Sucessful").subscribe(function(t){return n._alert.success(t,null,!0,!0)}),t)localStorage.setItem(e,t[e]);n._document.getElementById("reepay-token-iframe").remove(),n._router.navigate(["billing-plan","history"])}})},t.prototype.close=function(){this.confirmDialog.visible=!1,this.isViewCurrentPlan=!1,this.selectedCouponCode=null,this.couponCode=null},t.prototype.compareArray=function(t,n){if(t.length!==n.length)return!1;for(var e=t.length;e--;)if(t[e]!==n[e])return!1;return!0},t=T([Object(r.Component)({template:e("TdeZ"),styles:[e("Kl9A")],animations:[Object(o.a)()],host:{"[@fadeTransition]":""}}),E(7,Object(r.Inject)(b.DOCUMENT)),j("design:paramtypes",[y,p.a,O.a,c.Router,c.ActivatedRoute,l.c,x.f,Document])],t)}(),N=function(){return function(){this.itemsPerPage=10,this.orderBy="",this.keyword="",this.isDesc=!1,this.totalElements=0,this.totalPages=0}}(),V=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},B=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},L=function(){function t(t,n){this._billingPlanService=t,this._data=n,this.page=new N,this.expanded={},this.rows=[],this.isLoaded=!1}return t.prototype.ngOnInit=function(){this.paginate({offset:0})},t.prototype.paginate=function(t){this.page.pageNumber=t.offset+1,this.load()},t.prototype.toggleExpandRow=function(t){this.table.rowDetail.toggleExpandRow(t)},t.prototype.load=function(){var t=this;this._billingPlanService.getSubscriptionHistory(this.page).then(function(n){t.subscription=n.subscription,t.subscription.remaining=Math.ceil((+new Date(t.subscription.trial_end)-+new Date)/864e5),t.page.totalElements=n.total_elements,t.page.totalPages=n.total_pages,t.rows=n.content,t.plan=n.plan,t.isLoaded=!0})},V([Object(r.ViewChild)("historyTable"),B("design:type",Object)],t.prototype,"table",void 0),t=V([Object(r.Component)({template:e("Tyk+"),styles:[e("NMEK")],animations:[Object(o.a)()],host:{"[@fadeTransition]":""}}),B("design:paramtypes",[y,p.a])],t)}(),M=[{path:"",component:m,children:[{path:"",component:D},{path:"history",component:L},{path:":plan",component:D}]}],F=c.RouterModule.forChild(M),H=e("ZIaS"),q=e("oHSm"),z=e("8A13"),G=e("8tOD"),Y=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},K=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},J=function(){function t(){}return t.prototype.transform=function(t){var n=localStorage.getItem("lang");if("en"==JSON.parse(n).languageCode.split("-")[0])return t;var e=t.slice(0);return e=e.replace(",","|").replace(".",",").replace("|",".")},t=Y([Object(r.Pipe)({name:"replace"}),Object(r.Injectable)(),K("design:paramtypes",[])],t)}(),X=e("8Gd/");e.d(n,"BillingPlanModule",function(){return Q}),n.HttpLoaderFactory=W;var Z=this&&this.__decorate||function(t,n,e,r){var a,s=arguments.length,l=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,n,e,r);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(l=(s<3?a(l):s>3?a(n,e,l):a(n,e))||l);return s>3&&l&&Object.defineProperty(n,e,l),l},Q=function(){function t(){}return t=Z([Object(r.NgModule)({imports:[a.CommonModule,H.a,s.FormsModule,s.ReactiveFormsModule,F,q.NgxDatatableModule,l.b.forChild({loader:{provide:l.a,useFactory:W,deps:[d.HttpClient]},isolate:!0}),z.a,G.c,X.a],entryComponents:[w,R],declarations:[m,D,L,w,R,J],providers:[y]})],t)}();function W(t){return new i.a(t,"/assets/i18n/","-billing-plan.json")}}});