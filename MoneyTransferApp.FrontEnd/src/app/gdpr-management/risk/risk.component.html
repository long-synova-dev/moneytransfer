<div class="container">
    <div class="row">
        <div class="col-xs-6">
            <h1>{{ 'Risk.Title' | translate }}</h1>
            <p>{{ 'Risk.Description' | translate }}</p>
        </div>
    </div>
    <div class="row row-eq-height" *ngIf="isReady">
        <div class="col-xs-6">
            <h3>{{ 'Risk.NewAndProposedByComplyTo' | translate }}</h3>
            <div class="panel panel-dark" style="height: 100%">
                <div class="panel-body">
                    <button type="button" class="btn pmd-btn-raised pmd-ripple-effect btn-primary" (click)="addNew()">{{ 'Risk.AddNewBtn' | translate}}</button>
                    <div class="mt20"></div>
                    <div *ngFor="let risk of listRisks | filterBy: {isPublished: false}" class="risk-item pmd-z-depth {{risk.color}}">
                        <div class="risk-item__inner">
                            <div class="risk-item__status">
                            </div>
                            <div class="risk-item__body">
                                <div class="risk-item__header">
                                    <div class="risk-item__option" [matMenuTriggerFor]="menu">
                                        <i class="material-icons">more_vert</i>
                                    </div>
                                    <mat-menu #menu="matMenu">
                                        <button mat-menu-item (click)="goDetail(risk.riskId)">
                                            <span>{{ 'Risk.View' | translate }}</span>
                                        </button>
                                        <button mat-menu-item (click)="toggleTask(risk)" *ngIf="!risk.isShowTask">
                                            <span>{{ 'Risk.ShowTask' | translate }}</span>
                                        </button>
                                        <button mat-menu-item (click)="toggleTask(risk)" *ngIf="risk.isShowTask">
                                            <span>{{ 'Risk.Hide' | translate }}</span>
                                        </button>
                                    </mat-menu>
                                    <img src="assets/images/icon-complyto.png" alt="" width="16" *ngIf="risk.isAutoGenerated; else insert_drive_file">
                                    <ng-template #insert_drive_file><i class="material-icons">insert_drive_file</i></ng-template> <a href="javascript:void(0)" (click)="goDetail(risk.riskId)" title="{{risk.riskName}}">{{risk.riskName}}</a>
                                </div>
                                <div class="risk-item__task-area">
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <div class="risk-item__task-header">
                                                <div class="sub">{{risk.taskNonSchedule}}/{{risk.tasks.length}}</div>
                                                <strong>{{ 'Risk.NonScheduleTask' | translate }}</strong>
                                            </div>
                                        </div>
                                        <div class="col-xs-6">
                                            <div class="risk-item__task-header">
                                                <div class="sub">{{risk.tasks.length - risk.taskNonSchedule}}/{{risk.tasks.length}}</div>
                                                <strong>{{ 'Risk.ScheduleTask' | translate }}</strong>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row row-eq-height">
                                        <div class="col-xs-6">
                                            <div class="dark-area" *ngIf="risk.isShowTask">
                                                <div *ngFor="let task of risk.tasks">
                                                    <div *ngIf="task.taskStatus == 1" class="small-task-item">
                                                        <div class="small-task-item__inner">
                                                            <div class="small-task-item__name">
                                                                <i class="material-icons">view_list</i><strong>{{task.processName}}:</strong> {{task.taskName}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6">
                                            <div class="dark-area" *ngIf="risk.isShowTask">
                                                <div *ngFor="let task of risk.tasks">
                                                    <div *ngIf="task.taskStatus != 1" class="small-task-item">
                                                        <div class="small-task-item__inner">
                                                            <div class="small-task-item__name">
                                                                <i class="material-icons">view_list</i><strong>{{task.processName}}:</strong> {{task.taskName}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-6">
            <h3>{{ 'Risk.IndentifiedRisks' | translate }}</h3>
            <div class="panel panel-default" style="height: 100%">
                <div class="panel-body">
                    <div *ngFor="let risk of listRisks | filterBy: {isPublished: true}" class="risk-item pmd-z-depth {{risk.color}}">
                        <div class="risk-item__inner">
                            <div class="risk-item__status">
                            </div>
                            <div class="risk-item__body">
                                <div class="risk-item__header">
                                    <div class="risk-item__option" [matMenuTriggerFor]="menu">
                                        <i class="material-icons">more_horiz</i>
                                    </div>
                                    <mat-menu #menu="matMenu">
                                        <button mat-menu-item (click)="goDetail(risk.riskId)">
                                            <span>{{ 'Risk.View' | translate }}</span>
                                        </button>
                                        <button mat-menu-item (click)="toggleTask(risk)" *ngIf="!risk.isShowTask">
                                            <span>{{ 'Risk.ShowTask' | translate }}</span>
                                        </button>
                                        <button mat-menu-item (click)="toggleTask(risk)" *ngIf="risk.isShowTask">
                                            <span>{{ 'Risk.Hide' | translate }}</span>
                                        </button>
                                    </mat-menu>
                                    <img src="assets/images/icon-complyto.png" alt="" width="16" *ngIf="risk.isAutoGenerated; else insert_drive_file">
                                    <ng-template #insert_drive_file><i class="material-icons">insert_drive_file</i></ng-template> <a href="javascript:void(0)" (click)="goDetail(risk.riskId)" title="{{risk.riskName}}">{{risk.riskName}}</a>
                                </div>
                                <div class="risk-item__task-area">
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <div class="risk-item__task-header">
                                                <div class="sub">{{risk.taskNonSchedule}}/{{risk.tasks.length}}</div>
                                                <strong>{{ 'Risk.NonScheduleTask' | translate }}</strong>
                                            </div>
                                        </div>
                                        <div class="col-xs-6">
                                            <div class="risk-item__task-header">
                                                <div class="sub">{{risk.tasks.length - risk.taskNonSchedule}}/{{risk.tasks.length}}</div>
                                                <strong>{{ 'Risk.ScheduleTask' | translate }}</strong>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row row-eq-height">
                                        <div class="col-xs-6">
                                            <div class="dark-area" *ngIf="risk.isShowTask">
                                                <div *ngFor="let task of risk.tasks">
                                                    <div *ngIf="task.taskStatus == 1" class="small-task-item">
                                                        <div class="small-task-item__inner">
                                                            <div class="small-task-item__name">
                                                                <i class="material-icons">view_list</i><strong>{{task.processName}}:</strong> {{task.taskName}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6">
                                            <div class="dark-area" *ngIf="risk.isShowTask">
                                                <div *ngFor="let task of risk.tasks">
                                                    <div *ngIf="task.taskStatus != 1" class="small-task-item">
                                                        <div class="small-task-item__inner">
                                                            <div class="small-task-item__name">
                                                                <i class="material-icons">view_list</i><strong>{{task.processName}}:</strong> {{task.taskName}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>